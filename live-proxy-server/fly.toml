app = "maisondepriere-live"
primary_region = "cdg"

[build]

[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = false
  auto_start_machines = true

[env]
  PORT = "3000"
  # Set these secrets via: flyctl secrets set KEY=value
  # SUPABASE_URL = "your-supabase-url"
  # SUPABASE_SERVICE_KEY = "your-supabase-service-key"
  # VAPID_PUBLIC_KEY = "generated-vapid-public-key"
  # VAPID_PRIVATE_KEY = "generated-vapid-private-key"
  # VAPID_EMAIL = "mailto:admin@maisondepriere.app"
  # ADMIN_KEY = "maison-de-priere-admin-2026"

[[vm]]
  memory = "512mb"
  cpu_kind = "shared"
  cpus = 1

[mounts]
  source = "live_data"
  destination = "/app/streams"
  initial_size = "1gb"
